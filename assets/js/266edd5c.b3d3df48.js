"use strict";(self.webpackChunkbeta_BNB_Docs=self.webpackChunkbeta_BNB_Docs||[]).push([[8603],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},h=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),d=c(n),p=r,m=d["".concat(l,".").concat(p)]||d[p]||u[p]||i;return n?a.createElement(m,o(o({ref:t},h),{},{components:n})):a.createElement(m,o({ref:t},h))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6439:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(87462),r=(n(67294),n(3905));const i={sidebar_label:"BNB Smart Chain Archive Node",hide_table_of_contents:!1,sidebar_position:2},o="How to Run an Archive Node on BNB Smart Chain",s={unversionedId:"archivenode",id:"archivenode",title:"How to Run an Archive Node on BNB Smart Chain",description:"What is an archive node?",source:"@site/docs/archivenode.md",sourceDirName:".",slug:"/archivenode",permalink:"/docs/archivenode",draft:!1,editUrl:"https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/archivenode.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"BNB Smart Chain Archive Node",hide_table_of_contents:!1,sidebar_position:2},sidebar:"bscSideBar",previous:{title:"BNB Smart Chain Fast Node",permalink:"/docs/BSC-fast-node"},next:{title:"BNB Smart Chain Separate Node",permalink:"/docs/BSC-separate-node"}},l={},c=[{value:"What is an archive node?",id:"what-is-an-archive-node",level:2},{value:"Why is an archive node important?",id:"why-is-an-archive-node-important",level:2},{value:"Suggested Requirements",id:"suggested-requirements",level:2},{value:"How to run an archive node for BSC mainnet?",id:"how-to-run-an-archive-node-for-bsc-mainnet",level:2},{value:"Run with an Erigon client",id:"run-with-an-erigon-client",level:3}],h={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-run-an-archive-node-on-bnb-smart-chain"},"How to Run an Archive Node on BNB Smart Chain"),(0,r.kt)("h2",{id:"what-is-an-archive-node"},"What is an archive node?"),(0,r.kt)("p",null,"Simply speaking, an archive node is a full node running with an additional special option, ",(0,r.kt)("inlineCode",{parentName:"p"},"--gcmode archive"),". It stores all the historical data of the blockchain starting from the genesis block. As compared to a typical full node that just holds all the state change data for some latest blocks, an archive node always stores them for each block."),(0,r.kt)("h2",{id:"why-is-an-archive-node-important"},"Why is an archive node important?"),(0,r.kt)("p",null,"Developers are limited to querying the limited recent blocks to check the balance of an address and the state of a smart contract with a full node. It is hard to get all what they want as the blockchain is moving forward at the same time, while they can query any block at a specific point in time with an archive node.\nArchive nodes are used by various applications on the blockchain for challenging use cases, including but not limited to the followings:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Automatic trading system needs historical data to optimize trading model"),(0,r.kt)("li",{parentName:"ul"},"Verification modules need state data to verify transactions in time"),(0,r.kt)("li",{parentName:"ul"},"Analytical tools need full historical data to do data analysis"),(0,r.kt)("li",{parentName:"ul"},"Exchange in some wallets depends on archive node for fast and efficient transfers")),(0,r.kt)("h2",{id:"suggested-requirements"},"Suggested Requirements"),(0,r.kt)("p",null,"Running an archive node will take a high cost as it includes all the block and state change data. First of all it needs the disk with sufficient capacity; besides this, the CPU and disk performance should be good enough to catch up with the latest block height. You can refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/node-real/bsc-erigon?tab=readme-ov-file#system-requirements"},"suggested hardware requirements"),"."),(0,r.kt)("h2",{id:"how-to-run-an-archive-node-for-bsc-mainnet"},"How to run an archive node for BSC mainnet?"),(0,r.kt)("h3",{id:"run-with-an-erigon-client"},"Run with an Erigon client"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/node-real/bsc-erigon"},"Erigon")," has supported BSC mainnet. You can also refer to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/allada/bsc-archive-snapshot"},"Free public BNB Smart Chain Archive Snapshot"),' for the guide to run a BSC archive node with an Erigon client. The owner has switched to using an Erigon client for a BSC archive node recently. You can download the archive snapshot which is a tarball from aws s3. The s3 path is "s3://public-blockchain-snapshots/bsc/erigon-latest.tar.zstd". This path is public, but is configured as requester-pays. Also this means you\'ll need an AWS account in order to download it.'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Command to download to local dir:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'aws s3 cp --request-payer=requester  "s3://public-blockchain-snapshots/bsc/erigon-latest.tar.zstd"   local_data_dir\n\ntar --use-compress-program=unzstd -xvf erigon-latest.tar.zstd\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Command to run:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./erigon --chain=bsc --datadir  local_data_dir\n")),(0,r.kt)("p",null,"The known Issue with an Erigon client is that it does not really keep up with the latest blocks as mentioned in the Github. If you want to keep up with the latest blocks it is suggested to run a BSC archive node with high performance disk such as NVME, or run a BSC full node with a Geth client at the same time which  means you need one proxy that will ask Erigon if it has the block height and if not forward it to the Geth client."))}u.isMDXComponent=!0}}]);