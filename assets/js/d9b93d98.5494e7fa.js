"use strict";(self.webpackChunkbeta_BNB_Docs=self.webpackChunkbeta_BNB_Docs||[]).push([[3831],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=l(n),h=r,m=d["".concat(s,".").concat(h)]||d[h]||p[h]||o;return n?a.createElement(m,c(c({ref:t},u),{},{components:n})):a.createElement(m,c({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,c[1]=i;for(var l=2;l<o;l++)c[l]=n[l];return a.createElement.apply(null,c)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},65085:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const o={},c="Accounts",i={unversionedId:"beaconchain/learn/accounts",id:"beaconchain/learn/accounts",title:"Accounts",description:"Whenever a new address receives an asset, the corresponding transaction would create an Account for that address, which contains balances across all assets that are owned on this address.",source:"@site/docs/beaconchain/learn/accounts.md",sourceDirName:"beaconchain/learn",slug:"/beaconchain/learn/accounts",permalink:"/docs/beaconchain/learn/accounts",draft:!1,editUrl:"https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/beaconchain/learn/accounts.md",tags:[],version:"current",frontMatter:{},sidebar:"bscSideBar",previous:{title:"Architecture",permalink:"/docs/beaconchain/learn/architecture"},next:{title:"Escrow Accounts",permalink:"/docs/beaconchain/learn/escrow-accounts"}},s={},l=[{value:"Account Balance",id:"account-balance",level:2},{value:"Account and Sequence Number",id:"account-and-sequence-number",level:2},{value:"Cryptographic Design",id:"cryptographic-design",level:2},{value:"Keys",id:"keys",level:3},{value:"Address",id:"address",level:3},{value:"Signature",id:"signature",level:3}],u={toc:l},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"accounts"},"Accounts"),(0,r.kt)("p",null,"Whenever a new address receives an asset, the corresponding transaction would create an Account for that address, which contains balances across all assets that are owned on this address."),(0,r.kt)("h2",{id:"account-balance"},"Account Balance"),(0,r.kt)("p",null,"The balance (the amount of tokens) of each asset is composed of 3 different parts:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Available: the amount of tokens that can be transferred, and spent to swap (buy) other assets"),(0,r.kt)("li",{parentName:"ul"},"Locked: the amount of tokens that has been used in any outstanding orders. Once the order terminates (either filled, canceled or expired), the locked amount will decrease."),(0,r.kt)("li",{parentName:"ul"},"Frozen: the amount of tokens that has been frozen via Freeze transactions.")),(0,r.kt)("p",null,"You can query the account info with the following command on mainnet:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./bnbcli account <your-address> --chain-id Binance-Chain-Tigris --node https://dataseed5.defibit.io:443 --indent --trust-node\n")),(0,r.kt)("p",null,"Example output:"),(0,r.kt)("p",null,"Please note that the amount is boosted by e^8 for the decimal part."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"type":"bnbchain/Account","value":{"base":{"address":"tbnb1sylyjw032eajr9cyllp26n04300qzzre38qyv5","coins":[{"denom":"000-0E1","amount":"10530"},{"denom":"BNB","amount":"247349863800"},{"denom":"BTC.B-918","amount":"113218800"},{"denom":"COSMOS-587","amount":"50000101983748977"},{"denom":"EDU-DD0","amount":"139885964"},{"denom":"MFH-9B5","amount":"1258976083286"},{"denom":"NASC-137","amount":"0"},{"denom":"PPC-00A","amount":"205150260"},{"denom":"TGT-9FC","amount":"33251102828"},{"denom":"UCX-CC8","amount":"1398859649"},{"denom":"USDT.B-B7C","amount":"140456966268"},{"denom":"YLC-D8B","amount":"210572645"},{"denom":"ZZZ-21E","amount":"13988596"}],"public_key":{"type":"tendermint/PubKeySecp256k1","value":"AhOb3ZXecsIqwqKw+HhTscyi6K35xYpKaJx10yYwE0Qa"},"account_number":"406226","sequence":"29"},"name":"","frozen":null,"locked":[{"denom":"KOGE48-35D","amount":"10000000000"}]}}\n')),(0,r.kt)("p",null,"From the output you can see that this account account_number is 406226 and its sequence is 29. This is the important information about this account."),(0,r.kt)("h2",{id:"account-and-sequence-number"},"Account and Sequence Number"),(0,r.kt)("p",null,"After Account is created, besides the balances, Account also contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Account Number: an internal identifier for the account"),(0,r.kt)("li",{parentName:"ul"},"Sequence Number: an ever-changing integer.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Sequence Number")," is the way how BNB Beacon Chain prevents Replay Attack (the idea is borrowed from Cosmos network, but varies a bit in handling). Every transaction should have a new Sequence Number increased by 1 from the current latest sequence number of the Account, and after this transaction is recorded on the blockchain, the Sequence Number will be set to the same number as the one of latest transaction."),(0,r.kt)("p",null,"This logic forces the client to be aware of the current Sequence Number, either by reading from the blockchain via API, or keep the counting locally by themselves. The recommended way is to keep counting locally and re-synchronize from the blockchain periodically."),(0,r.kt)("h2",{id:"cryptographic-design"},"Cryptographic Design"),(0,r.kt)("p",null,"For normal users, all the keys and addresses can be generated via ",(0,r.kt)("a",{parentName:"p",href:"https://www.binance.org/en/create"},"Binance Web Wallet"),"."),(0,r.kt)("p",null,"This default wallet would use a similar way to generate keys as Bitcoin, i.e. use 256 bits entropy to generate a 24-word mnemonic based on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki"},"BIP39"),", and then use the mnemonic and an empty passphrase to generate a seed; finally use the seed to generate a master key, and derive the private key using BIP32/BIP44 with HD prefix as ",(0,r.kt)("inlineCode",{parentName:"p"},"\"44'/714'/\""),", which is reserved at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/satoshilabs/slips/blob/master/slip-0044.md"},"SLIP 44"),"."),(0,r.kt)("h3",{id:"keys"},"Keys"),(0,r.kt)("p",null,"BNB Beacon Chain uses the same elliptic curve cryptography as the current ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/btcsuite/btcd/tree/master/btcec"},"Bitcoin implementation"),", i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"secp256k1"),". Its private key is 32 bytes while public key is 33 bytes."),(0,r.kt)("h3",{id:"address"},"Address"),(0,r.kt)("p",null,"Addresses on BNB Beacon Chain are 20 bytes and may be expressed as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Address = RIPEMD160(SHA256(compressed public key))\n")),(0,r.kt)("p",null,"Typically, an address is encoded in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki"},"bech32")," format which includes a checksum and human-readable prefix (HRP). However, it doesn't use the ",(0,r.kt)("inlineCode",{parentName:"p"},"SegWit")," address format (because we do not have ",(0,r.kt)("inlineCode",{parentName:"p"},"SegWit")," function anyway, so no ",(0,r.kt)("inlineCode",{parentName:"p"},"witness program version")," etc.)."),(0,r.kt)("p",null,"A BNB Beacon Chain address is therefore more similar to a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoincashorg/bitcoincash.org/blob/master/spec/cashaddr.md"},"Bitcoin Cash address"),", which does not include a SegWit program script."),(0,r.kt)("p",null,"Address format pseudo-code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Address_Bech32 = HRP + '1' + bech32.encode(convert8BitsTo5Bits(RIPEMD160(SHA256(compressed public key))))\n")),(0,r.kt)("p",null,"For BNB Beacon Chain  address, the prefix is ",(0,r.kt)("inlineCode",{parentName:"p"},"bnb")," for production network, and ",(0,r.kt)("inlineCode",{parentName:"p"},"tbnb")," for testnet."),(0,r.kt)("h3",{id:"signature"},"Signature"),(0,r.kt)("p",null,"BNB Beacon Chain uses an ECDSA signature on curve secp256k1 against a ",(0,r.kt)("inlineCode",{parentName:"p"},"SHA256")," hash of the byte array of a JSON-encoded canonical representation of the transaction. For more information, please see ",(0,r.kt)("a",{parentName:"p",href:"/docs/beaconchain/learn/encoding/#canonical-bytes-for-signing"},"this page"),"."))}p.isMDXComponent=!0}}]);